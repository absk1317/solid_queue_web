<!DOCTYPE html>
<html>
  <head>
    <title>Solid Queue Monitor</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      .navbar-brand { font-weight: bold; }
      .stats-card { border-radius: 8px; }
      .badge { font-size: 0.75em; }
      .table th { border-top: none; font-weight: 600; }
      .arguments-cell { max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <%= link_to "Solid Queue Monitor", root_path, class: "navbar-brand" %>
        
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <%= link_to "Overview", root_path, class: "nav-link #{'active' if current_page?(root_path)}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Ready Jobs", jobs_by_status_path('ready'), class: "nav-link #{'active' if params[:status] == 'ready'}" %>
            </li>
            <li class="nav-item">
              <%= link_to "In Progress Jobs", jobs_by_status_path('in_progress'), class: "nav-link #{'active' if params[:status] == 'in_progress'}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Scheduled Jobs", jobs_by_status_path('scheduled'), class: "nav-link #{'active' if params[:status] == 'scheduled'}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Recurring Jobs", jobs_by_status_path('recurring'), class: "nav-link #{'active' if params[:status] == 'recurring'}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Failed Jobs", jobs_by_status_path('failed'), class: "nav-link #{'active' if params[:status] == 'failed'}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Queues", queues_path, class: "nav-link #{'active' if current_page?(queues_path)}" %>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-4">
      <%= yield %>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>